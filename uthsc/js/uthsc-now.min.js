function renderNewsPosts(s,a,t){var e=posts.length-loadPostsLast;$(s).append(parseUthscNowPosts(a));var n=$(".uthsc-now").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0});if(n.imagesLoaded().progress(function(){n.masonry("layout")}),$(".uthsc-now-loader").empty(),t&&($(".uthsc-now").masonry("reloadItems"),$(".uthsc-now").masonry()),e>20)$(".uthsc-now-more").html('<div class="button uthsc-now-load-more-button">Load More</div>'),$(".uthsc-now-load-more-button").click(function(){renderNewsPosts(".uthsc-now",posts,!0)});else{var o="";o+='<div class="row">',o+='<div class="columns text-center uthsc-social-icons" aria-label="UTHSC on social media">',o+="<p>That's all for now<br/>Follow UTHSC online...</p>",o+='<a href="https://facebook.com/uthsc" aria-label="facebook">',o+='<span class="fa fa-facebook fa-2x " aria-hidden="true"></span>',o+='<span class="show-for-sr">facebook</span>',o+="</a>",o+='<a href="https://twitter.com/uthsc" aria-label="twitter">',o+='<span class="fa fa-twitter fa-2x " aria-hidden="true"></span>',o+='<span class="show-for-sr">twitter</span>',o+="</a>",o+='<a href="https://instagram.com/uthsc" aria-label="instagram">',o+='<span class="fa fa-instagram fa-2x " aria-hidden="true"></span>',o+='<span class="show-for-sr">instagram</span>',o+="</a>",o+='<a href="https://linkedin.com/company/university-of-tennessee-health-science-center" aria-label="linked in">',o+='<span class="fa fa-linkedin fa-2x " aria-hidden="true"></span>',o+='<span class="show-for-sr">linked in</span>',o+="</a>",o+='<a href="https://youtube.com/user/uthsc" aria-label="youtube">',o+='<span class="fa fa-youtube fa-2x " aria-hidden="true"></span>',o+='<span class="show-for-sr">You-tube</span>',o+="</a>",o+='<a href="https://pinterest.com/uthsc/" aria-label="pinterest">',o+='<span class="fa fa-pinterest fa-2x " aria-hidden="true"></span>',o+='<span class="show-for-sr">pinterest</span>',o+="</a>",o+="</div>",o+="</div>",$(".uthsc-now-more").html(o)}}function limitCaptionChars(s,a){if(s&&s.length>a){var t=s.substr(0,a);return t=t.substr(0,Math.min(t.length,t.lastIndexOf(" "))),t+="&nbsp;&hellip;"}return s}function parseUthscNowPosts(s){for(var a="",t=loadPostsFirst;t<loadPostsLast;t++){var e,n=s[t].service,o=s[t].service_name,i=s[t].link,r=s[t].caption,c=s[t].date,l=s[t].service_icon,h=s[t].image;e=null==h?"uthsc-now--no-image":"uthsc-now--image",a+='<a href="'+i+'" class="grid-item uthsc-now--item '+e+" "+n+" post-0"+(t+1)+' "><div class="uthsc-now--container">',a+=null==h?'<div class="uthsc-now--message"><p>'+limitCaptionChars(r,100)+"</p></div>":'<div class="uthsc-now--image"><img src="'+h+'" style="width:100%"/></div><div class="uthsc-now--message"><p>'+limitCaptionChars(r,100)+"</p></div>",a+='<div class="uthsc-now--footer"><div class="uthsc-now--service"><span class="'+l+'">&nbsp;'+o+'</span></div><div class="uthsc-now--date"><p>'+c+"</p></div></div>",a+="</div></a>"}return loadPostsFirst+=20,loadPostsLast+=20,a}var url="/now/json/uthsc-now.json",loadPostsFirst=0,loadPostsLast=20;$.ajax({type:"GET",url:url,dataType:"json",success:function(s){posts=s,renderNewsPosts(".uthsc-now",posts)}});