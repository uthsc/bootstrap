var uthscNowHomepage={url:"/includes/uthsc-now-homepage.json",loadPostsFirst:0,loadPostsLast:14,posts:[],renderNewsPosts:function(s,o,t){jQuery(s).append(uthscNowHomepage.parseUthscNowPosts(o));var e=$(".uthsc-now").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0});e.imagesLoaded().progress(function(){e.masonry("layout")}),jQuery(".uthsc-now-loader").empty(),t&&(jQuery(".uthsc-now").masonry("reloadItems"),jQuery(".uthsc-now").masonry()),uthscNowHomepage.loadPostsFirst<=15?(jQuery(".uthsc-now-more").html('<div class="button uthsc-now-load-more-button">Load More&nbsp;<span class="fa fa-refresh" aria-hidden="true"></span></div>'),jQuery(".uthsc-now-load-more-button").click(function(){uthscNowHomepage.renderNewsPosts(".uthsc-now",uthscNowHomepage.posts,!0)})):jQuery(".uthsc-now-more").html('<a class="button" href="/now">Go to UTHSC-Now&nbsp;<span class="fa fa-chevron-right" aria-hidden="true"></span></a>')},limitCaptionChars:function(s,o){if(s&&s.length>o){var t=s.substr(0,o);return t.substr(0,Math.min(t.length,t.lastIndexOf(" ")))+"&nbsp;&hellip;"}return s},parseUthscNowPosts:function(s){for(var o="",t=uthscNowHomepage.loadPostsFirst;t<uthscNowHomepage.loadPostsLast;t++){var e,a=s[t].service,n=s[t].service_name,r=s[t].link,c=s[t].caption,i=s[t].date,u=s[t].service_icon,h=s[t].image;e=null==h?"uthsc-now--no-image":"uthsc-now--image",o+='<a href="'+r+'" class="grid-item uthsc-now--item '+e+" "+a+" post-0"+(t+1)+' "><div class="uthsc-now--container">',o+=null==h?'<div class="uthsc-now--message"><p>'+uthscNowHomepage.limitCaptionChars(c,100)+"</p></div>":'<div class="uthsc-now--image"><img src="'+h+'" style="width:100%"/></div><div class="uthsc-now--message"><p>'+uthscNowHomepage.limitCaptionChars(c,100)+"</p></div>",o+='<div class="uthsc-now--footer"><div class="uthsc-now--service"><span class="'+u+'">&nbsp;'+n+'</span></div><div class="uthsc-now--date"><p>'+i+"</p></div></div>",o+="</div></a>"}return uthscNowHomepage.loadPostsFirst+=15,uthscNowHomepage.loadPostsLast+=15,o}};$.ajax({type:"GET",url:uthscNowHomepage.url,dataType:"json",success:function(s){uthscNowHomepage.posts=s,uthscNowHomepage.renderNewsPosts(".uthsc-now",s)}});